<html>

<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
</head>

<body>
    <h1>hellow world appID:462910531970000 for login</h1>

    <div>testing fb login </div>
    <a onclick="statusCheck()">
        <font color="blue">status check</font>
    </a> <br /><br /><br />
    <a onclick="login()">
        <font color="red">Login again</font>
    </a> <br />

    <script>
    var accessToken = '0'
        window.fbAsyncInit = function () {
            FB.init({
                appId: '462910531970000',
                cookie: true,
                xfbml: true,
                version: 'v10.0'
            });

            FB.AppEvents.logPageView();

        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s); js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));


        function statusCheck() {
            FB.getLoginStatus(function (response) {
                console.log(response);
                accessToken = response.authResponse.accessToken;
                console.log('token:'+accessToken);

                console.log("below is result from reporting api v2 using token got from login");
                fetch("https://graph.facebook.com/v5.0/303864140097729/adnetworkanalytics/?access_token=EAAGlA8HSI9ABAO8hcZAZAwTBZCYZCTM4ZC2EMmMRYZC49od3XZC37E3wNVpP3U9VAtmfS7DgqUuertOabpgwms9qDSDlYwEPJC68ZBkZBRj15pcAmp0USMK5JG4ZAcJ5q4zFvZCgEMgQ25kemZApwHOxFMZBfJNqag2674d79pjxqCcZAAWUKUwMECgTToIzgMbGv96ZA3wui2lCqKZA6a5YcktgzeZAT0njgnWpz0ZBMZD&metrics=[%27fb_ad_network_imp%27,%27fb_ad_network_click%27]&breakdowns=[%27platform%27,%20%27placement%27]&since=2020-11-03&until=2020-11-03").then((response) =>
                    console.log(response)
                );
                fetch("https://jsonplaceholder.typicode.com/posts/1")
                    .then((response) => response.json())
                    .then((data) => {
                        console.log(data)
                        console.log("ok\n")
                        console.log(data["title"])
                    });
            });

        }

        function login() {
            FB.login(function (response) {
                console.log(response);


            }, { scope: 'email, public_profile, read_audience_network_insights, read_insights' });

        }
    </script>


</body>

</html>
